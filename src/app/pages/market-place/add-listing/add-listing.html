<div class="add-listing-container">
  <mat-card class="add-listing-card">
    <h2 i18n="@@addListing.title">Add New Boat Listing</h2>

    <form [formGroup]="addListingForm" (ngSubmit)="createListing()" novalidate>
      <div class="form-grid">
        <!-- Title -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.title.label">Title</mat-label>
          <input matInput formControlName="title" placeholder="Sea Ray 40 Motor Yacht">
        </mat-form-field>

        <!-- Description -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label i18n="@@addListing.field.description.label">Description</mat-label>
          <textarea matInput rows="4" formControlName="description"
            placeholder="Describe the vessel, features, and condition"></textarea>
        </mat-form-field>

        <!-- Category / Boat Type / Class -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.category.label">Category</mat-label>
          <mat-select formControlName="category">
            <mat-option value="Power" i18n="@@addListing.field.category.option.power">Power</mat-option>
            <mat-option value="Sail" i18n="@@addListing.field.category.option.sail">Sail</mat-option>
            <mat-option value="Other" i18n="@@addListing.field.category.option.other">Other</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Engine Section -->
        <div formArrayName="engines" class="engine-section">
          <h3 i18n="@@addListing.section.engine.title">Engines</h3>
          <div *ngFor="let engine of engines.controls; let i = index" [formGroupName]="i" class="engine-item">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label i18n="@@addListing.field.engine.make.label">Engine Make</mat-label>
              <input matInput formControlName="make" placeholder="Volvo Penta">
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label i18n="@@addListing.field.engine.power.label">Power (hp)</mat-label>
              <input matInput type="number" formControlName="power_hp" placeholder="300">
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label i18n="@@addListing.field.engine.hours.label">Engine Hours</mat-label>
              <input matInput type="number" formControlName="hours" placeholder="1200">
            </mat-form-field>

            <button mat-button color="warn" type="button" (click)="removeEngine(i)"
              i18n="@@addListing.field.engine.remove">Remove</button>
          </div>

          <button mat-stroked-button color="primary" type="button" (click)="addEngine()"
            i18n="@@addListing.field.engine.add">Add Engine</button>
        </div>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.boatType.label">Boat Type</mat-label>
          <mat-select formControlName="boatType">
            <mat-option value="Sailboat" i18n="@@addListing.field.boatType.option.sailboat">Sailboat</mat-option>
            <mat-option value="Motorboat" i18n="@@addListing.field.boatType.option.motorboat">Motorboat</mat-option>
            <mat-option value="Yacht" i18n="@@addListing.field.boatType.option.yacht">Yacht</mat-option>
            <mat-option value="Catamaran" i18n="@@addListing.field.boatType.option.catamaran">Catamaran</mat-option>
            <mat-option value="Fishing Boat" i18n="@@addListing.field.boatType.option.fishingBoat">Fishing
              Boat</mat-option>
            <mat-option value="Trawler" i18n="@@addListing.field.boatType.option.trawler">Trawler</mat-option>
            <mat-option value="Speedboat" i18n="@@addListing.field.boatType.option.speedboat">Speedboat</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.boatClass.label">Boat Class</mat-label>
          <input matInput formControlName="boatClass" placeholder="Cruiser, Motor Yacht, etc.">
        </mat-form-field>

        <!-- Make / Model -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.make.label">Make</mat-label>
          <input matInput formControlName="make" placeholder="Beneteau, Sea Ray, etc.">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.model.label">Model</mat-label>
          <input matInput formControlName="model" placeholder="47 Power, Oceanis, etc.">
        </mat-form-field>

        <!-- Hull Material -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.hullMaterial.label">Hull Material</mat-label>
          <mat-select formControlName="hullMaterial">
            <mat-option value="Wood" i18n="@@addListing.field.hullMaterial.option.wood">Wood</mat-option>
            <mat-option value="Fiberglass"
              i18n="@@addListing.field.hullMaterial.option.fiberglass">Fiberglass</mat-option>
            <mat-option value="Aluminum" i18n="@@addListing.field.hullMaterial.option.aluminum">Aluminum</mat-option>
            <mat-option value="Steel" i18n="@@addListing.field.hullMaterial.option.steel">Steel</mat-option>
            <mat-option value="Composite" i18n="@@addListing.field.hullMaterial.option.composite">Composite</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Capacity -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.capacity.label">Capacity</mat-label>
          <input matInput formControlName="capacity" placeholder="8 people">
        </mat-form-field>

        <!-- Pricing -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.price.label">Price</mat-label>
          <input matInput type="number" formControlName="price" placeholder="100000">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.currency.label">Currency</mat-label>
          <mat-select formControlName="currency">
            <mat-option value="USD">USD</mat-option>
            <mat-option value="EUR">EUR</mat-option>
            <mat-option value="GBP">GBP</mat-option>
            <mat-option value="AUD">AUD</mat-option>
            <mat-option value="SGD">SGD</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Year / Length / Condition -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.year.label">Year</mat-label>
          <input matInput type="number" formControlName="year" placeholder="2022">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.length.label">Length (m)</mat-label>
          <input matInput type="number" formControlName="length_m" placeholder="14.5">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.condition.label">Condition</mat-label>
          <mat-select formControlName="condition">
            <mat-option value="New" i18n="@@addListing.field.condition.option.new">New</mat-option>
            <mat-option value="Used" i18n="@@addListing.field.condition.option.used">Used</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Location -->
        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.country.label">Country</mat-label>
          <input matInput formControlName="country" placeholder="Turkey">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.city.label">City</mat-label>
          <input matInput formControlName="city" placeholder="Istanbul">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label i18n="@@addListing.field.port.label">Port</mat-label>
          <input matInput formControlName="port" placeholder="Kalamis Marina">
        </mat-form-field>

        <!-- Images -->
        <div class="image-upload">
          <label for="images" i18n="@@addListing.field.images.label">Upload Images</label>
          <input type="file" id="images" multiple accept="image/*" (change)="onImageSelected($event)"  formControlName="images"/>

          <div class="image-preview-grid" *ngIf="previewImages.length > 0">
            <div class="preview-item" *ngFor="let img of previewImages">
              <img [src]="img" alt="Preview" />
            </div>
          </div>
        </div>
      </div>

      <div class="actions">
        <button mat-stroked-button color="warn" type="reset" i18n="@@addListing.button.reset">Reset</button>
        <button mat-raised-button color="primary" type="submit" [disabled]="loading"
          i18n="@@addListing.button.submit">Create Listing</button>
      </div>
    </form>
  </mat-card>
</div>